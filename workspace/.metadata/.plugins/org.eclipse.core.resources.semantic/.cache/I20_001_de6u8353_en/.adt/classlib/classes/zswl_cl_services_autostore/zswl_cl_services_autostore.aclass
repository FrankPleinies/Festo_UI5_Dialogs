class ZSWL_CL_SERVICES_AUTOSTORE definition
  public
  inheriting from ZSWL_CL_AS_IF_ABSTRACT
  final
  create public .

public section.
  type-pools ABAP .
  type-pools WMEGC .

  constants GC_METHOD_OPENPORT type CHAR20 value 'openport' ##NO_TEXT.
  constants GC_METHOD_OPENPORT_TRANSF_NAME type STRING value 'ZSWL_AS_REQ_OPEN_PORT' ##NO_TEXT.
  constants GC_METHOD_OPENBIN type CHAR20 value 'openbin' ##NO_TEXT.
  constants GC_METHOD_OPENBIN_TRANSF_NAME type STRING value 'ZSWL_AS_REQ_OPEN_BIN' ##NO_TEXT.
  constants GC_METHOD_CLOSEBIN type CHAR20 value 'closebin' ##NO_TEXT.
  constants GC_METHOD_CLOSEBIN_TRANSF_NAME type STRING value 'ZSWL_AS_REQ_CLOSE_BIN' ##NO_TEXT.
  constants GC_METHOD_CLOSEPORT type CHAR20 value 'closeport' ##NO_TEXT.
  constants GC_METHOD_CLOSEPORT_TRANSF_NA type STRING value 'ZSWL_AS_REQ_CLOSE_PORT' ##NO_TEXT.
  constants GC_METHOD_REMOVEBIN type CHAR20 value 'removebin' ##NO_TEXT.
  constants GC_METHOD_REMOVEBIN_TRANSF_NA type STRING value 'ZSWL_AS_REQ_REMOVE_BIN' ##NO_TEXT.
  constants GC_METHOD_UPDATEBIN type CHAR20 value 'updatebin' ##NO_TEXT.
  constants GC_METHOD_UPDATEBIN_TRANSF_NA type STRING value 'ZSWL_AS_REQ_UPDATE_BIN' ##NO_TEXT.
  constants GC_METHOD_CREA_TASKGROUP type CHAR20 value 'create_taskgroup' ##NO_TEXT.
  constants GC_METHOD_CREA_TG_TRANSF_NAME type STRING value 'ZSWL_AS_REQ_CREA_TASK_GROUP' ##NO_TEXT.
  constants GC_METHOD_UPD_TASKGROUP type CHAR20 value 'update_taskgroup' ##NO_TEXT.
  constants GC_METHOD_UPD_TG_TRANSF_NAME type STRING value 'ZSWL_AS_REQ_UPD_TASK_GROUP' ##NO_TEXT.
  constants GC_METHOD_CANC_TASKGROUP type CHAR20 value 'cancel_taskgroup' ##NO_TEXT.
  constants GC_METHOD_CANC_TG_TRANSF_NAME type STRING value 'ZSWL_AS_REQ_CANC_TASK_GROUP' ##NO_TEXT.
  constants GC_METHOD_ADD_TASK type CHAR20 value 'add_task' ##NO_TEXT.
  constants GC_METHOD_ADD_TASK_TRANSF_NAME type STRING value 'ZSWL_AS_REQ_ADD_TASK' ##NO_TEXT.
  constants GC_METHOD_CANCEL_TASK type CHAR20 value 'cancel_task' ##NO_TEXT.
  constants GC_METHOD_CANC_TASK_TRANSF_NA type STRING value 'ZSWL_AS_REQ_CANCEL_TASK' ##NO_TEXT.
  constants GC_METHOD_PORT_CELL_ALLOC type CHAR20 value 'portcellallocate' ##NO_TEXT.
  constants GC_METHOD_PT_CL_ALOC_TRNSF_NA type STRING value 'ZSWL_AS_REQ_PORT_CELL_ALLOC' ##NO_TEXT.
  constants GC_METHOD_PORT_LOC_READY type CHAR20 value 'portlocationready' ##NO_TEXT.
  constants GC_METHOD_PT_LOC_RDY_TRNSF_NA type STRING value 'ZSWL_AS_REQ_PORT_LOC_READY' ##NO_TEXT.
  constants GC_METHOD_PORT_BIN_READY type CHAR20 value 'portbinready' ##NO_TEXT.
  constants GC_METHOD_PT_BIN_RDY_TRNSF_NA type STRING value 'ZSWL_AS_REQ_PORT_BIN_READY' ##NO_TEXT.
  constants GC_METHOD_PORT_BIN_MODE type CHAR20 value 'portbinmode' ##NO_TEXT.
  constants GC_METHOD_PT_BIN_MODE_TRNSF_NA type STRING value 'ZSWL_AS_REQ_PORT_BIN_MODE' ##NO_TEXT.
  constants GC_METHOD_GET_BIN_INFO type CHAR20 value 'getbininfo' ##NO_TEXT.
  constants GC_METHOD_GET_BIN_INF_TRNSF_NA type STRING value 'ZSWL_AS_REQ_GET_BIN_INFO' ##NO_TEXT.
  constants GC_METHOD_GET_BIN_LOCATION type CHAR20 value 'getbinloc' ##NO_TEXT.
  constants GC_METHOD_GET_TASK_INFO type CHAR20 value 'gettaskinfo' ##NO_TEXT.
  constants GC_METHOD_INSERTBIN type CHAR20 value 'insertbin' ##NO_TEXT.
  constants GC_METHOD_INSERTBIN_TRANSF_NA type STRING value 'ZSWL_AS_REQ_INSERT_BIN' ##NO_TEXT.
  constants GC_AS_RC_1002 type ZSWL_DE_AS_RESP_CODE value '1002' ##NO_TEXT.
  constants GC_METHOD_DELETEBIN type CHAR20 value 'deletebin' ##NO_TEXT.
  constants GC_METHOD_DELETEBIN_TRANSF_NA type STRING value 'ZSWL_AS_REQ_DELETE_BIN' ##NO_TEXT.
  constants GC_METHOD_FLUSHPORTBIN type CHAR20 value 'flushportbin' ##NO_TEXT.
  constants GC_METHOD_FLUSHPORTBIN_TRANSF type STRING value 'ZSWL_AS_REQ_FLUSHPORTBIN' ##NO_TEXT.
  constants GC_METHOD_FORCECHARGE type CHAR20 value 'forcecharge' ##NO_TEXT.
  constants GC_METHOD_FORCECHARGE_TRANSF type STRING value 'ZSWL_AS_REQ_FORCECHARGE' ##NO_TEXT.
  constants GC_METHOD_GETSYSTEMSTATE type CHAR20 value 'getsystemstate' ##NO_TEXT.
  constants GC_METHOD_GETSYSTSTATE_TRANSF type STRING value 'ZSWL_AS_REQ_GETSYSTEMSTATE' ##NO_TEXT.
  constants GC_METHOD_FORECASTBIN type CHAR20 value 'forecastbin' ##NO_TEXT.
  constants GC_METHOD_FORECASTBIN_TRANSF type STRING value 'ZSWL_AS_REQ_FORECASTBIN' ##NO_TEXT.
  constants GC_METHOD_CANCELFORECASTBIN type CHAR20 value 'cancelforecastbin' ##NO_TEXT.
  constants GC_METHOD_CANCELFORECASTBIN_TR type STRING value 'ZSWL_AS_REQ_CANCELFORECASTBIN' ##NO_TEXT.
  constants GC_METHOD_GETPORTSTATUS type CHAR20 value 'getportstatus' ##NO_TEXT.
  constants GC_METHOD_GETPORTSTATUS_TRANSF type STRING value 'ZSWL_AS_REQ_GETPORTSTATUS' ##NO_TEXT.
  constants GC_AS_RESPONSE_TRANSF type STRING value 'ZSWL_AS_RESPONSE' ##NO_TEXT.

  methods CONSTRUCTOR
    importing
      !I_DESTINATION type PFICF_DESTINATION_NAME default 'AUTOSTOREINTERFACE'
      !I_LGNUM type /SCWM/LGNUM optional
      !I_GRID_ID type ZSWL_DE_AS_GRID_ID default '1'
    raising
      ZCX_SWL_AS_IF_EXCEPTION .
  methods GETBININFO
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST_BIN_INFO
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ET_RESPONSE type ZSWL_TT_RESPONSE_BIN_INFO
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional
    raising
      ZCX_SWL_AS_IF_EXCEPTION .
  methods GETBINLOCATION
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST_BIN_INFO
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ET_RESPONSE type ZSWL_TT_RESPONSE_BIN_INFO
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional
    raising
      ZCX_SWL_AS_IF_EXCEPTION .
  methods GETTASKINFORMATION
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST_BIN_INFO
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ET_RESPONSE type ZSWL_TT_RESPONSE_TASKGRP
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional
    raising
      ZCX_SWL_AS_IF_EXCEPTION .
  methods OPENBIN
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ES_RESPONSE type ZSWL_S_AS_IF_RESPONSE
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional
    raising
      ZCX_SWL_AS_IF_EXCEPTION .
  methods CLOSEBIN
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ES_RESPONSE type ZSWL_S_AS_IF_RESPONSE
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional
    raising
      ZCX_SWL_AS_IF_EXCEPTION .
  methods REMOVEBIN
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ES_RESPONSE type ZSWL_S_AS_IF_RESPONSE
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional
    raising
      ZCX_SWL_AS_IF_EXCEPTION .
  methods INSERTBIN
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ES_RESPONSE type ZSWL_S_AS_IF_RESPONSE
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional
    raising
      ZCX_SWL_AS_IF_EXCEPTION .
  methods UPDATEBIN
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ES_RESPONSE type ZSWL_S_AS_IF_RESPONSE
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional
    raising
      ZCX_SWL_AS_IF_EXCEPTION .
  methods CLOSEPORT
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ES_RESPONSE type ZSWL_S_AS_IF_RESPONSE
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional
    raising
      ZCX_SWL_AS_IF_EXCEPTION .
  methods ADD_TASK
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ES_RESPONSE type ZSWL_S_AS_IF_RESPONSE
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional
    raising
      ZCX_SWL_AS_IF_EXCEPTION .
  methods CANCEL_TASK
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ES_RESPONSE type ZSWL_S_AS_IF_RESPONSE
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional
    raising
      ZCX_SWL_AS_IF_EXCEPTION .
  methods CREATE_TASKGROUP
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ES_RESPONSE type ZSWL_S_AS_IF_RESPONSE
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional
    raising
      ZCX_SWL_AS_IF_EXCEPTION .
  methods CANCEL_TASKGROUP
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ES_RESPONSE type ZSWL_S_AS_IF_RESPONSE
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional
    raising
      ZCX_SWL_AS_IF_EXCEPTION .
  methods UPDATE_TASKGROUP
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ES_RESPONSE type ZSWL_S_AS_IF_RESPONSE
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional
    raising
      ZCX_SWL_AS_IF_EXCEPTION .
  methods OPENPORT
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ES_RESPONSE type ZSWL_S_AS_IF_RESPONSE
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional
    raising
      ZCX_SWL_AS_IF_EXCEPTION .
  methods PORTCELLALLOCATE
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST_PORT_TELE
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ES_RESPONSE type ZSWL_S_AS_IF_RESPONSE
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional
    raising
      ZCX_SWL_AS_IF_EXCEPTION .
  methods PORTBINMODE
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST_PORT_TELE
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ES_RESPONSE type ZSWL_S_AS_IF_RESPONSE
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional
    raising
      ZCX_SWL_AS_IF_EXCEPTION .
  methods PORTBINREADY
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST_PORT_TELE
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ES_RESPONSE type ZSWL_S_AS_IF_RESPONSE
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional
    raising
      ZCX_SWL_AS_IF_EXCEPTION .
  methods PORTLOCATIONREADY
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST_PORT_TELE
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ES_RESPONSE type ZSWL_S_AS_IF_RESPONSE
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional
    raising
      ZCX_SWL_AS_IF_EXCEPTION .
  class-methods TEST_METHOD
    importing
      !I_METHOD_NAME type CHAR20
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST optional
      !IS_REQUEST_PORT_TELE type ZSWL_S_AS_IF_REQUEST_PORT_TELE optional
    exporting
      !ES_RESPONSE type ZSWL_S_AS_IF_RESPONSE
      !EV_RESULT type STRING .
  class-methods UPDATE_HU_CONTENT_FROM_AS
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST_BIN_INFO
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
      !IV_LGNUM type /SCWM/LGNUM
    exporting
      !ET_UPDATED_HUS type /SCWM/TT_HUHDR_INT
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG
    raising
      ZCX_SWL_AS_IF_EXCEPTION
      ZCX_EWM_GENERAL_EXCEPTION .
  class-methods UPDATE_AS_BIN_CONTENT_FROM_HUS
    importing
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
      !IV_LGNUM type /SCWM/LGNUM
      !IV_HUIDENT_FROM type /SCWM/DE_HUIDENT optional
      !IV_HUIDENT_TO type /SCWM/DE_HUIDENT optional
      !IT_HUIDENTS type RSELOPTION optional
    exporting
      !ET_UPDATED_HUS type /SCWM/TT_HUHDR_INT
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG
    raising
      ZCX_SWL_AS_IF_EXCEPTION .
  methods DELETEBIN
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ES_RESPONSE type ZSWL_S_AS_IF_RESPONSE
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional .
  methods FLUSHPORTBIN
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ES_RESPONSE type ZSWL_S_AS_IF_RESPONSE
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional .
  methods FORCECHARGE
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ES_RESPONSE type ZSWL_S_AS_IF_RESPONSE
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional .
  methods GETSYSTEMSTATE
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST optional
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ES_RESPONSE type ZSWL_S_AS_IF_RESPONSE
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional .
  methods FORECASTBIN
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST_BIN_INFO
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ES_RESPONSE type ZSWL_S_AS_IF_RESPONSE_BIN_INFO
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional .
  methods CANCELFORECASTBIN
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST_BIN_INFO
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ES_RESPONSE type ZSWL_S_AS_IF_RESPONSE_BIN_INFO
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional .
  methods GETPORTSTATUS
    importing
      !IS_REQUEST type ZSWL_S_AS_IF_REQUEST
      !IV_WRITE_LOG type BOOLEAN default ABAP_TRUE
    exporting
      !ES_RESPONSE type ZSWL_S_AS_IF_RESPONSE
      !EV_SUCCESSFUL type BOOLEAN
      !EV_ERRORTEXT type STRING
    changing
      !CR_LOG type ref to ZSWL_CL_LOG optional .
  class-methods BUILD_AS_TASKGROUPS_BY_WHO
    importing
      !IT_WHO type /SCWM/TT_WHO
      !IV_LGNUM type /SCWM/LGNUM
    changing
      !CO_LOG type ref to ZSWL_CL_LOG optional
    raising
      ZCX_EWM_GENERAL_EXCEPTION .
  class-methods CANCEL_AS_TASK_BY_WT
    importing
      !IV_LGNUM type /SCWM/LGNUM
      !IT_ORDIM_C type /SCWM/TT_ORDIM_C .
protected section.
private section.

  class-data GO_SERVICE_AS type ref to ZSWL_CL_SERVICES_AUTOSTORE .
ENDCLASS.



CLASS ZSWL_CL_SERVICES_AUTOSTORE IMPLEMENTATION.


method ADD_TASK.
    DATA: ls_request    TYPE zswl_s_as_if_request,
          lv_trans_name TYPE string,
          lr_exc        TYPE REF TO zcx_swl_as_if_exception.

    TRY.
        IF cr_log IS NOT BOUND.
          CREATE OBJECT go_log.
        ELSE.
          go_log = cr_log.
        ENDIF.

        "Log
        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_add_task
                INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

        ls_request = is_request.
    "check if taskgroup_id is set
    me->check_mandatory_field( EXPORTING i_param_name = 'TASKGROUP_ID' is_request = is_request ).
    "check if category is set
*    me->check_mandatory_field( EXPORTING i_param_name = 'CATEGORY' is_request = is_request ).
*    "check if req_time is set
*    me->check_mandatory_field( EXPORTING i_param_name = 'REQ_TIME' is_request = is_request ).
*    "check if priority is set
*    me->check_mandatory_field( EXPORTING i_param_name = 'PRIORITY' is_request = is_request ).
*    "check if min. one task is inserted
*    me->check_mandatory_field( EXPORTING i_param_name = 'TASKS' is_request = is_request ).

    "set the method name
    ls_request-method_name = zswl_cl_services_autostore=>gc_method_add_task.
    "set the transformation name
    lv_trans_name = zswl_cl_services_autostore=>gc_method_add_task_transf_name.
    "process
        me->process(
          EXPORTING
            is_request = ls_request
            iv_req_transf_name = lv_trans_name
            iv_no_response = abap_true
          CHANGING
            cs_response = es_response ).

        ev_successful = abap_true.

        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_add_task
        INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_successful = abap_false.
        ev_errortext = lr_exc->m_msg_text.
    ENDTRY.

    IF iv_write_log = abap_true.
     go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
                         i_balid = zswl_cl_services_autostore=>gc_method_add_task
                         i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
    ENDIF.
  endmethod.


METHOD build_as_taskgroups_by_who.
*************************************************************************
** Company     : Swisslog AG
**
** Package     : ZSWL_UTILITIES
** FGroup      :
** FModule     :
** Class       : ZSWL_CL_SERVICES_CONVEYOR
** Enhancement :
** Description : Build and send a taskgroup with tasks for each Warehouse
**               order to the AutoStore Interface
**
**
*************************************************************************
** REVISIONS:
** ---------
**
** Version ¦ Date       ¦ Author           ¦ Description
** ------- ¦ ---------- ¦ ---------------- ¦ ----------------------------
** 1.0     ¦ 2016-06-14 ¦ F. Pleinies      ¦ created
** 1.1     ¦ 2016-09-22 ¦ T. Rehmann       ¦ Review
** 1.2     ¦ 2016-09-30 ¦ T. Rehmann       ¦ Sync I3W and EW4
** 1.3     ¦ 2016-09-31 ¦ T. Rehmann       ¦ Catched some exceptions
**
*************************************************************************
*
*    " ------------------------------------------ "
*    "  Local Declarations..
*    " ------------------------------------------ "
*    TYPES:
*      BEGIN OF astaskno,
*        huident TYPE /scwm/de_huident,
*        astask  TYPE zswl_de_as_task_id,
*      END OF astaskno.
*
*    DATA: ls_who          LIKE LINE OF it_who,
*          lo_who          TYPE REF TO zswl_cl_who,
*          lo_as_if        TYPE REF TO zswl_cl_services_autostore,
*          ls_request      TYPE zswl_s_as_if_request,
*          ls_request_task TYPE zswl_s_as_if_request_task,
*          lt_wt_ref       TYPE zswl_tt_wt_ref,
*          ls_wt_ref       LIKE LINE OF lt_wt_ref,
**          ls_response     TYPE zswl_s_as_if_response,
*          lv_successful   TYPE boolean,
*          lv_errortext    TYPE string,
*          lv_huident      TYPE /scwm/de_huident,
*          lt_hutaskno     TYPE STANDARD TABLE OF astaskno,
*          ls_hutaskno     LIKE LINE OF lt_hutaskno,
*          lv_category     TYPE zswl_de_as_category,
*          lv_priority     TYPE zswl_de_as_priority,
*          lv_nr_object    TYPE nrobj,
*          lv_intervall    TYPE nrnr,
*          lv_ok           TYPE boolean,
*          lv_docno        TYPE /scdl/dl_docno.
*
*    " ------------------------------------------ "
*    "  Processing Logic..
*    " ------------------------------------------ "
**   Create log object if not bound
*    IF co_log IS NOT BOUND.
*      CREATE OBJECT co_log.
*    ENDIF.
*
**   Build one taskgroup for each warehouse order
*    LOOP AT it_who INTO ls_who.
*      CLEAR ls_request.
*
*      CREATE OBJECT lo_who
*        EXPORTING
*          i_who   = ls_who-who
*          i_lgnum = iv_lgnum
*          io_log  = co_log.
*
*
*      SHIFT ls_who-who LEFT DELETING LEADING '0'.
*      ls_request-taskgroup_id = ls_who-who.
*      ls_request-req_time = zswl_cl_as_if_abstract=>convert_date_into_as_time( ). "Sydatum and sytime
**      "Get category from param table
**      lv_category = zswl_cl_param_select=>read_const(
**        EXPORTING
**          iv_lgnum      = iv_lgnum
**          iv_param_prof = 'AS'
**          iv_context    = 'AS'
**          iv_parameter  = 'CATEGORY' ). "not MAX_RETRIES
**
**      IF lv_category IS NOT INITIAL.
**        ls_request-category = lv_category.
**      ELSE.
**      ENDIF.
*
*        CASE lo_who->get_data( )-hdr_procty.
*          WHEN 'B201'.
*        ls_request-category = '10'.
*          WHEN 'B211'.
*        ls_request-category = '15'.
*        WHEN 'AV01'.
*          ls_request-category = '99'.
*        ENDCASE.
*
*      "Get priority from param table
*      lv_priority = zswl_cl_param_select=>read_const(
*        EXPORTING
*          iv_lgnum      = iv_lgnum
*          iv_param_prof = 'AS'
*          iv_context    = 'AS1'
*          iv_parameter  = 'PRIORITY' ). "not MAX_RETRIES
*      IF lv_priority IS NOT INITIAL.
*        ls_request-priority = lv_priority.
*      ELSE.
*        ls_request-priority = '20'.
*      ENDIF.
*
**     Get all open WT's for the Warehouse order
*      TRY.
*          lt_wt_ref = lo_who->get_open_wts( ).
*        CATCH zcx_ewm_general_exception.
*          "No open WT found.
*          lv_errortext = 'No open WT found. Exit'.
*          MESSAGE e000(zswl) WITH lv_errortext INTO zswl_cl_log=>m_dummy_msg.
*          co_log->add( i_syst = abap_true ).
*          CONTINUE.
*      ENDTRY.
*
*      "Update WT by ZZSWL_ASTASK
*      "Get number range name from param table
*      lv_nr_object = zswl_cl_param_select=>read_const(
*        EXPORTING
*          iv_lgnum      = iv_lgnum
*          iv_param_prof = 'AS'
*          iv_context    = 'AS1'
*          iv_parameter  = 'ASTASKNR_OBJECT' ). "not MAX_RETRIES
*      IF lv_nr_object IS INITIAL.
*        "Raise exception
*        lv_nr_object = 'ZSWL_ASTSK'.
*      ENDIF.
*      "Get number range interval no. from param table
*      lv_intervall = zswl_cl_param_select=>read_const(
*        EXPORTING
*          iv_lgnum      = iv_lgnum
*          iv_param_prof = 'AS'
*          iv_context    = 'AS1'
*          iv_parameter  = 'ASTASKNR_INTERVALL' ). "not MAX_RETRIES
*
*      IF lv_intervall IS INITIAL.
*        "Raise exception
*        lv_intervall = '01'.
*      ENDIF.
*
*      CLEAR lt_hutaskno.
*      LOOP AT lt_wt_ref INTO ls_wt_ref.
*        CLEAR ls_hutaskno.
*
*        CHECK ls_wt_ref-o_wt->get_ordim_o( )-zzswl_astask IS INITIAL AND
*              ls_wt_ref-o_wt->get_ordim_o( )-kzsub IS INITIAL.
*
*        READ TABLE lt_hutaskno INTO ls_hutaskno WITH KEY huident = ls_wt_ref-o_wt->get_ordim_o( )-vlenr.
*        IF sy-subrc <> 0. "HU already not assigned, get new number
*          ls_hutaskno-huident = ls_wt_ref-o_wt->get_ordim_o( )-vlenr.
*          CALL FUNCTION 'NUMBER_GET_NEXT'
*            EXPORTING
*              nr_range_nr        = lv_intervall
*              object             = lv_nr_object
*              subobject          = iv_lgnum
*            IMPORTING
*              number             = ls_hutaskno-astask
*            EXCEPTIONS
*              interval_not_found = 1
*              OTHERS             = 99.
*          IF sy-subrc <> 0.
*            ls_hutaskno-astask = space.
*          ENDIF.
*          APPEND ls_hutaskno TO lt_hutaskno.
*        ENDIF.
*
*        ls_wt_ref-o_wt->update_astaskno(
*          EXPORTING
*            iv_astaskno = ls_hutaskno-astask
*            iv_commit = abap_false ).
*      ENDLOOP.
*
*      IF  zswl_cl_param_select=>read_const( iv_lgnum      = iv_lgnum
*                                              iv_param_prof = 'AS'
*                                              iv_context    = 'AS1'
*                                              iv_parameter  = 'IF_EMU' ) = abap_true.
*        ls_request-taskgroup_id = ls_hutaskno-astask.
*      ENDIF.
*
**     Reread all open WT's for the Warehouse order after update
*      lt_wt_ref = lo_who->get_open_wts( ).
*
**     Build task for each WT
*      LOOP AT lt_wt_ref INTO ls_wt_ref.
*        "Set the shipment number
**        IF ls_request-shipment IS INITIAL.
**          zswl_cl_services_autostore=>get_dlv_docno(
**            EXPORTING
**              is_ordim_o = ls_wt_ref-o_wt->get_ordim_o( )
**            IMPORTING
**              ev_docno = lv_docno ).
**          ls_request-shipment = lv_docno.
**        ENDIF.
*
*        CLEAR ls_request_task.
*        CHECK ls_wt_ref-o_wt->get_ordim_o( )-zzswl_astask IS NOT INITIAL.
*
*        ls_request_task-task_id = ls_wt_ref-o_wt->get_ordim_o( )-zzswl_astask.
*        SHIFT ls_request_task-task_id LEFT DELETING LEADING '0'.
*        lv_huident = ls_wt_ref-o_wt->get_ordim_o( )-vlenr.
*        zswl_cl_hu=>delete_leading_zeros_huident( CHANGING c_hu = lv_huident ).
*        ls_request_task-bin_id = lv_huident.
*        APPEND ls_request_task TO ls_request-tasks.
*      ENDLOOP.
*
*      SORT ls_request-tasks BY bin_id task_id.
*      "Delete duplicate HU entries, else we get 9997 error from AutoStore Interface
*      DELETE ADJACENT DUPLICATES FROM ls_request-tasks.
*
*      TRY.
*          IF lo_as_if IS NOT BOUND.
*            CREATE OBJECT lo_as_if.
*          ENDIF.
*
*          "Check if port is open
*          zswl_cl_as_if_abstract=>check_connection( EXPORTING iv_lgnum = iv_lgnum IMPORTING ev_successful = lv_ok ).
*          IF lv_ok = abap_true.
*            "ls_request_port-port_id = '001'.
*            "lo_as_if->openport( EXPORTING is_request = ls_request_port ).
*
*            CLEAR: lv_successful, lv_errortext.
*            lo_as_if->create_taskgroup(
*              EXPORTING
*                is_request    = ls_request
**          iv_write_log  = ABAP_TRUE
*              IMPORTING
**              es_response   = ls_response
*                ev_successful = lv_successful
*                ev_errortext  = lv_errortext
*              CHANGING
*                cr_log        = co_log ).
*
*            IF lv_successful = abap_false.
**           Error while creating taskgroup
*              MESSAGE e000(zswl) WITH lv_errortext INTO zswl_cl_log=>m_dummy_msg.
*              co_log->add( i_syst = abap_true ).
*
*            ELSE.
**           Update KZSUB by all WT's
*              LOOP AT lt_wt_ref INTO ls_wt_ref.
*                ls_wt_ref-o_wt->update_kzsub(
*                  EXPORTING
*                     iv_kzsub = 'Y'"'X'
*                     iv_commit = abap_false ).
*              ENDLOOP.
*
*
*            ENDIF.
*
*          ELSE.
**           Error while creating taskgroup
**           Connection not available
*            lv_errortext = 'Connection not available'.
*            MESSAGE e000(zswl) WITH lv_errortext INTO zswl_cl_log=>m_dummy_msg.
*            co_log->add( i_syst = abap_true ).
*
*          ENDIF.
*
*
*        CATCH zcx_swl_as_if_exception .
*          "Nothing to do
*      ENDTRY.
*    ENDLOOP.
  ENDMETHOD.


METHOD cancelforecastbin.

    " ------------------------------------------- "
    "  Local Declarations..
    " ------------------------------------------- "

    DATA: ls_request    LIKE is_request,
          lv_trans_name TYPE string,
          lr_exc        TYPE REF TO zcx_swl_as_if_exception.

    " ------------------------------------------- "
    "  Processing Logic..
    " ------------------------------------------- "

    TRY.
        " Initialize Logging object..
        IF cr_log IS NOT BOUND.
          CREATE OBJECT go_log.
        ELSE.
          go_log = cr_log.
        ENDIF.

        " Start logging..
        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_cancelforecastbin
                              INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

        ls_request = is_request.

        " Set the method name..
        ls_request-method_name = zswl_cl_services_autostore=>gc_method_cancelforecastbin.
        " Set the transformation name..
        lv_trans_name = zswl_cl_services_autostore=>gc_method_cancelforecastbin_tr.
        " Process..
        me->process(
          EXPORTING
            is_request = ls_request
            iv_req_transf_name = lv_trans_name
          CHANGING
            cs_response = es_response ).

        ev_successful = abap_true.

        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_cancelforecastbin
                              INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_successful = abap_false.
        ev_errortext = lr_exc->m_msg_text.
    ENDTRY.

    IF iv_write_log = abap_true.
      " Write logging..
      go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
                         i_balid = zswl_cl_services_autostore=>gc_method_cancelforecastbin
                         i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
    ENDIF.

  ENDMETHOD.


method CANCEL_AS_TASK_BY_WT.
************************************************************************
* Company     : Swisslog AG
*
* Package     : ZSWL_CORE
* FGroup      : N/A
* FModule     : N/A
* Class       : N/A
* Enhancement : BAdi '/SCWM/EX_CORE_CO_POST'
* Description : This ABAP is used to send AS Task Cancellation message to
*               Auto Store system
*
************************************************************************
* REVISIONS:
* ---------
*
* Version ¦ Date       ¦ Author           ¦ Description
* ------- ¦ ---------- ¦ ---------------- ¦ ----------------------------
* 1.0     ¦ 2017-01-05 ¦ N. Gokhale       ¦ Initial version
* 2.0     ¦ 2018-08-30 ¦ N. Gokhale       ¦ Implemented usage of Parameter F/W
*                                           for value lookups.
*
************************************************************************

    " ------------------------------------------ "
    "  Local Declarations..
    " ------------------------------------------ "

    CONSTANTS : gc_zero    TYPE c VALUE '0',
                gc_f_kzsub TYPE rollname VALUE 'KZSUB'.

    TYPES : BEGIN OF ty_astask,
              tanum        TYPE /scwm/tanum,
              zzswl_astask TYPE zswl_de_as_task_id,
              tostat       TYPE /scwm/de_tostat,
            END OF ty_astask,

            BEGIN OF ty_open_wt,
              lgnum        TYPE /scwm/lgnum,
              tanum        TYPE /scwm/tanum,
              zzswl_astask TYPE zswl_de_as_task_id,
              tostat       TYPE /scwm/de_tostat,
              kzsub        TYPE /scwm/ltap_kzsub,
            END OF ty_open_wt.


    DATA : lv_rfcdest       TYPE pficf_destination_name,
           lo_as_services   TYPE REF TO zswl_cl_services_autostore,
           ls_request       TYPE zswl_s_as_if_request,
           ls_response      TYPE zswl_s_as_if_response,
           lv_successful    TYPE boolean,
           lv_errortext     TYPE string,
           lo_as_excp       TYPE REF TO zcx_swl_as_if_exception,
           lo_log           TYPE REF TO zswl_cl_log,
           lt_astask        TYPE STANDARD TABLE OF ty_astask,
           ls_astask        TYPE ty_astask,
           lt_to_change_att TYPE /scwm/tt_to_change_att,
           ls_to_change_att TYPE /scwm/s_to_change_att,
           lt_changed       TYPE /scwm/tt_changed,
           ls_changed       TYPE /scwm/s_changed,
           lt_bapiret       TYPE bapirettab,
           ls_bapiret       TYPE bapiret2,
           lv_severity      TYPE bapi_mtype,
           lv_lognr         TYPE balognr,
           lv_message       TYPE string,
           lv_msgtext       TYPE string,
           lv_as_st         TYPE /scwm/ltap_vltyp,
           lv_ret_val       TYPE zswl_de_param_low.

    " ------------------------------------------ "
    "  Processing Logic..
    " ------------------------------------------ "

    IF iv_lgnum IS NOT INITIAL AND
       it_ordim_c[] IS NOT INITIAL.

      "Determine the storage type for AutoStore
      lv_as_st = zswl_cl_param=>read_const( iv_lgnum      = iv_lgnum
                                                     iv_context    = 'AS1'
                                                     iv_parameter  = 'STORAGETYPE' ).
      "Determine the RFC Destination for AutoStore
      lv_rfcdest = zswl_cl_param=>read_const( iv_lgnum      = iv_lgnum
                                                     iv_context    = 'AS1'
                                                     iv_parameter  = 'RFC' ).

      "Loop over all canceled warehouse tasks which are relevant for the AutoStore
      LOOP AT it_ordim_c[] INTO DATA(ls_ordim_cancel)
                           WHERE tostat = wmegc_to_canceled
                           "AND kzsub IS NOT INITIAL
                           "AND zzswl_astask NE space
                           AND vltyp = lv_as_st.

        ls_astask-tanum = ls_ordim_cancel-tanum.
*        ls_astask-zzswl_astask = ls_ordim_cancel-zzswl_astask.
        ls_astask-tostat = ls_ordim_cancel-tostat.
        APPEND ls_astask TO lt_astask[].
      ENDLOOP.

      IF lines( lt_astask ) > 0.

        SORT lt_astask[] BY tanum zzswl_astask.
        DELETE ADJACENT DUPLICATES FROM lt_astask[] COMPARING tanum zzswl_astask.

        TRY.
            CREATE OBJECT lo_as_services.

          CATCH zcx_swl_as_if_exception INTO lo_as_excp.
        ENDTRY.
        IF lo_as_services IS BOUND.
          TRY.
              " Check connection to AS..
              zswl_cl_services_autostore=>check_connection(
                EXPORTING
                  " iv_huident    =
                  iv_write_log  = abap_true
                IMPORTING
                  ev_successful = lv_successful
                  ev_errortext  = lv_errortext
                " et_response   =
                CHANGING
                  co_log        = lo_log ).
            CATCH zcx_swl_as_if_exception INTO lo_as_excp.
              IF lo_as_excp IS NOT INITIAL.
                " Get the raised exception message..
                lo_as_excp->get_exception_message(
                  RECEIVING
                    pr_result = lv_message ).
                MESSAGE i000(zswl_as) INTO lv_msgtext WITH lv_message.
                lo_log->add( i_syst = abap_true ).
              ENDIF.
          ENDTRY.

          " Process further in case connection could be established..
          IF lv_successful = abap_true AND
             lo_as_excp IS INITIAL.
            " Process the cancelled AS-specific WT-tasks
            LOOP AT lt_astask[] INTO ls_astask.

              " No other WT for with the same AS Task..
              CLEAR : lo_as_excp,
                      lv_successful,
                      lv_errortext,
                      lv_message,
                      lv_msgtext,
                      lt_to_change_att[],
                      ls_to_change_att,
                      lt_changed[],
                      ls_changed,
                      lt_bapiret[],
                      ls_bapiret,
                      lv_severity,
                      lv_lognr.
              " Cancel AS Task..
              ls_request-task_id = ls_astask-zzswl_astask.
              SHIFT ls_request-task_id LEFT DELETING LEADING gc_zero.
              TRY.
                  lo_as_services->cancel_task(
                    EXPORTING
                      is_request    = ls_request
                      iv_write_log  = abap_true
                    IMPORTING
                      es_response   = ls_response
                      ev_successful = lv_successful
                      ev_errortext  = lv_errortext
                    CHANGING
                      cr_log        = lo_log ).
                CATCH zcx_swl_as_if_exception INTO lo_as_excp.
                  IF lo_as_excp IS NOT INITIAL.
                    " Get the raised exception message..
                    lo_as_excp->get_exception_message(
                      RECEIVING
                        pr_result = lv_message ).
                    MESSAGE i000(zswl_as) INTO lv_msgtext WITH lv_message.
                    lo_log->add( i_syst = abap_true ).
                  ENDIF.
              ENDTRY.
              IF lo_as_excp IS INITIAL AND
                 ( ls_response-code = 0 OR
                   ls_response-code = space ).
                " Clear WT Subsystem indicator..
                ls_to_change_att-tanum = ls_astask-tanum.
                ls_changed-fieldname = gc_f_kzsub.
                ls_changed-value_c = space.
                APPEND ls_changed TO lt_changed[].
                CLEAR ls_changed.
                ls_to_change_att-tt_changed = lt_changed[].
                CALL FUNCTION '/SCWM/TO_CHANGE_ATT'
                  EXPORTING
                    iv_lgnum       = iv_lgnum
                    iv_subst       = abap_true
                    iv_commit_work = abap_false
                    it_change_att  = lt_to_change_att[]
                  IMPORTING
                    et_bapiret     = lt_bapiret[]
                    ev_severity    = lv_severity
                    ev_lognr       = lv_lognr.
                IF lv_severity CA wmegc_severity_ea.
                  " Error..
                  LOOP AT lt_bapiret[] INTO ls_bapiret  "#EC CI_CONV_OK
                                       WHERE type CA wmegc_severity_ea.
                    MESSAGE e000(zswl_as) INTO lv_message WITH ls_bapiret-message.
                    lo_log->add( i_syst = abap_true ).
                  ENDLOOP.
                ELSE.
                  " Success..
                  MESSAGE s039(zswl_as) INTO lv_message WITH ls_astask-tanum.
                  lo_log->add( i_syst = abap_true ).
                ENDIF.
              ENDIF.
            ENDLOOP.
          ENDIF.
        ENDIF.
      ENDIF.
    ENDIF.
endmethod.


METHOD cancel_task.
    DATA: ls_request    TYPE zswl_s_as_if_request,
          lv_trans_name TYPE string,
          lr_exc        TYPE REF TO zcx_swl_as_if_exception.

    TRY.
        IF cr_log IS NOT BOUND.
          CREATE OBJECT go_log.
        ELSE.
          go_log = cr_log.
        ENDIF.

        "Log
        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_cancel_task
                INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

        ls_request = is_request.
        "check if taskgroup_id is set
        me->check_mandatory_field( EXPORTING i_param_name = 'TASK_ID' is_request = is_request ).

        "set the method name
        ls_request-method_name = zswl_cl_services_autostore=>gc_method_cancel_task.
        "set the transformation name
        lv_trans_name = zswl_cl_services_autostore=>gc_method_canc_task_transf_na.
        "process
        me->process(
          EXPORTING
            is_request = ls_request
            iv_req_transf_name = lv_trans_name
            iv_no_response = abap_true
          CHANGING
            cs_response = es_response ).

        ev_successful = abap_true.

        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_cancel_task
        INTO zswl_cl_log=>m_dummy_msg.
       go_log->add( i_syst = abap_true ).

      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_successful = abap_false.
        ev_errortext = lr_exc->m_msg_text.
    ENDTRY.

    IF iv_write_log = abap_true.
      go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
                         i_balid = zswl_cl_services_autostore=>gc_method_cancel_task
                         i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
    ENDIF.
  ENDMETHOD.


METHOD cancel_taskgroup.
    DATA: ls_request    TYPE zswl_s_as_if_request,
          lv_trans_name TYPE string,
          lr_exc        TYPE REF TO zcx_swl_as_if_exception.

    TRY.
        IF cr_log IS NOT BOUND.
          CREATE OBJECT go_log.
        ELSE.
          go_log = cr_log.
        ENDIF.

        "Log
        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_canc_taskgroup
                INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

        ls_request = is_request.
        "check if taskgroup_id is set
        me->check_mandatory_field( EXPORTING i_param_name = 'TASKGROUP_ID' is_request = is_request ).

        "set the method name
        ls_request-method_name = zswl_cl_services_autostore=>gc_method_canc_taskgroup.
        "set the transformation name
        lv_trans_name = zswl_cl_services_autostore=>gc_method_canc_tg_transf_name.
        "process
        me->process(
          EXPORTING
            is_request = ls_request
            iv_req_transf_name = lv_trans_name
            iv_no_response = abap_true
          CHANGING
            cs_response = es_response ).

        ev_successful = abap_true.

        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_canc_taskgroup
        INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_successful = abap_false.
        ev_errortext = lr_exc->m_msg_text.
    ENDTRY.

    IF iv_write_log = abap_true.
      go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
                         i_balid = zswl_cl_services_autostore=>gc_method_canc_taskgroup
                         i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
    ENDIF.

  ENDMETHOD.


METHOD closebin.
    DATA: ls_request    TYPE zswl_s_as_if_request,
          lv_trans_name TYPE string,
          lr_exc        TYPE REF TO zcx_swl_as_if_exception.

    TRY.
        IF cr_log IS NOT BOUND.
          CREATE OBJECT go_log.
        ELSE.
          go_log = cr_log.
        ENDIF.

        "Log
        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_closebin
                INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

        ls_request = is_request.
        "check if port_id is not null
        me->check_mandatory_field( EXPORTING i_param_name = 'PORT_ID' is_request = is_request ).
        "check if bin_id is not null
        me->check_mandatory_field( EXPORTING i_param_name = 'BIN_ID' is_request = is_request ).

        "set the method name
        ls_request-method_name = zswl_cl_services_autostore=>gc_method_closebin.
        "set the transformation name
        lv_trans_name = zswl_cl_services_autostore=>gc_method_closebin_transf_name.
        "process
        me->process(
          EXPORTING
            is_request = ls_request
            iv_req_transf_name = lv_trans_name
            iv_no_response = abap_true
          CHANGING
            cs_response = es_response ).

        ev_successful = abap_true.

        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_closebin
        INTO zswl_cl_log=>m_dummy_msg.
       go_log->add( i_syst = abap_true ).

      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_successful = abap_false.
        ev_errortext = lr_exc->m_msg_text.
    ENDTRY.

    IF iv_write_log = abap_true.
      go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
                         i_balid = zswl_cl_services_autostore=>gc_method_closebin
                         i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
    ENDIF.
  ENDMETHOD.


METHOD closeport.
    DATA: ls_request    TYPE zswl_s_as_if_request,
          lv_trans_name TYPE string,
          lr_exc        TYPE REF TO zcx_swl_as_if_exception.

    TRY.
        IF cr_log IS NOT BOUND.
          CREATE OBJECT go_log.
        ELSE.
          go_log = cr_log.
        ENDIF.

        "Log
        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_closeport
                INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

        ls_request = is_request.
        "check if port_id is not null
        me->check_mandatory_field( EXPORTING i_param_name = 'PORT_ID' is_request = is_request ).

        "set the method name
        ls_request-method_name = zswl_cl_services_autostore=>gc_method_closeport.
        "set the transformation name
        lv_trans_name = zswl_cl_services_autostore=>gc_method_closeport_transf_na.
        "process
        me->process(
          EXPORTING
            is_request = ls_request
            iv_req_transf_name = lv_trans_name
            iv_no_response = abap_true
          CHANGING
            cs_response = es_response ).

        ev_successful = abap_true.

        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_closeport
        INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_successful = abap_false.
        ev_errortext = lr_exc->m_msg_text.
    ENDTRY.

    IF iv_write_log = abap_true.
      go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
                         i_balid = zswl_cl_services_autostore=>gc_method_closeport
                         i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
    ENDIF.
  ENDMETHOD.


METHOD constructor.
************************************************************************
* Company     : Swisslog AG
*
* Package     : ZSWL_AUTOSTORE
* Class       : ZSWL_CL_SERVICES_AUTOSTORE
* Enhancement :
* Description : This method determine the RFC destination for the AutoStore
*               from the AS config table. IF no entry found we use the
*               default RFC destination.
*
************************************************************************
* REVISIONS:
* ---------
*
* Version ¦ Date       ¦ Author           ¦ Description
* ------- ¦ ---------- ¦ ---------------- ¦ ----------------------------
* 1.0     ¦ 2016-06-14 ¦ F. Pleinies      ¦ Initial
* 1.1     ¦ 2017-03-08 ¦ F. Peinies       ¦ Read RFC destination from config
* 1.2     ¦ 2018-08-16 ¦ B7GOKHN          ¦ Get RFC Destination from the
*                                           SWL Parameter Framework (WIP)
*
************************************************************************
    DATA:
      "lt_asconfig  TYPE STANDARD TABLE OF zswl_as_config_t,
      "ls_asconfig  TYPE zswl_as_config_t,
      lv_rfc_desti TYPE pficf_destination_name,
      lv_par_id    TYPE char20,
      lv_lgnum     TYPE /scwm/lgnum.


    " Get the RFC Destination for AS.
    IF i_lgnum IS SUPPLIED AND i_lgnum IS NOT INITIAL.
*      SELECT SINGLE * INTO ls_asconfig FROM zswl_as_config_t
*        WHERE lgnum   = i_lgnum
*          AND p_name  = zswl_cl_as_process_outbound=>mc_as_rfc_dest.
      CONCATENATE i_lgnum i_grid_id INTO lv_par_id SEPARATED BY '-'.
      CONDENSE lv_par_id.
      "lv_par_id = i_lgnum.
      lv_rfc_desti = zswl_cl_param=>read_const( iv_lgnum      = i_lgnum
                                                       iv_context    = 'AS_ADMIN_RFC'"zswl_cl_param_c=>c_context_as_admin_rfc
                                                       iv_parameter  = lv_par_id ).
    ELSE.
*      SELECT SINGLE * INTO ls_asconfig FROM zswl_as_config_t
*        WHERE p_name = zswl_cl_as_process_outbound=>mc_as_rfc_dest.

      lv_lgnum = i_lgnum.
      CONCATENATE lv_lgnum i_grid_id INTO lv_par_id SEPARATED BY '-'.
      CONDENSE lv_par_id.

      lv_rfc_desti = zswl_cl_param=>read_const( iv_lgnum      = lv_lgnum
                                                       iv_context    = 'AS_ADMIN_RFC'"zswl_cl_param_c=>c_context_as_admin_rfc
                                                       iv_parameter  = lv_par_id ).
    ENDIF.

    IF lv_rfc_desti IS INITIAL.
      lv_rfc_desti = i_destination.            "'AUTOSTOREINTERFACE'
    ENDIF.

    " Get the AS specific HU Types..
    get_as_hu_types( ).

    super->constructor( EXPORTING i_destination = lv_rfc_desti ).
  ENDMETHOD.


METHOD create_taskgroup.
    DATA: ls_request    TYPE zswl_s_as_if_request,
          lv_trans_name TYPE string,
          lr_exc        TYPE REF TO zcx_swl_as_if_exception.

    TRY.
        IF cr_log IS NOT BOUND.
          CREATE OBJECT go_log.
        ELSE.
          go_log = cr_log.
        ENDIF.

        "Log
        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_crea_taskgroup
                INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

        ls_request = is_request.
        "check if taskgroup_id is set
        me->check_mandatory_field( EXPORTING i_param_name = 'TASKGROUP_ID' is_request = is_request ).
        "check if category is set
        me->check_mandatory_field( EXPORTING i_param_name = 'CATEGORY' is_request = is_request ).
        "check if req_time is set
        me->check_mandatory_field( EXPORTING i_param_name = 'REQ_TIME' is_request = is_request ).
        "check if priority is set
        me->check_mandatory_field( EXPORTING i_param_name = 'PRIORITY' is_request = is_request ).
        "check if min. one task is inserted
        me->check_mandatory_field( EXPORTING i_param_name = 'TASKS' is_request = is_request ).

        "set the method name
        ls_request-method_name = zswl_cl_services_autostore=>gc_method_crea_taskgroup.
        "set the transformation name
        lv_trans_name = zswl_cl_services_autostore=>gc_method_crea_tg_transf_name.
        "process
        me->process(
          EXPORTING
            is_request = ls_request
            iv_req_transf_name = lv_trans_name
            iv_no_response = abap_true
          CHANGING
            cs_response = es_response ).

        ev_successful = abap_true.

        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_crea_taskgroup
        INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_successful = abap_false.
        ev_errortext = lr_exc->m_msg_text.
    ENDTRY.

    IF iv_write_log = abap_true.
      go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
                         i_balid = zswl_cl_services_autostore=>gc_method_crea_taskgroup
                         i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
    ENDIF.
  ENDMETHOD.


METHOD deletebin.

    " ------------------------------------------- "
    "  Local Declarations..
    " ------------------------------------------- "

    DATA: ls_request    LIKE is_request,
          lv_trans_name TYPE string,
          lr_exc        TYPE REF TO zcx_swl_as_if_exception.

    " ------------------------------------------- "
    "  Processing Logic..
    " ------------------------------------------- "

    TRY.
        " Initialize Logging object..
        IF cr_log IS NOT BOUND.
          CREATE OBJECT go_log.
        ELSE.
          go_log = cr_log.
        ENDIF.

        " Start logging..
        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_deletebin
                              INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

        ls_request = is_request.
        " Check whether 'BIN_ID' is not initial..
        me->check_mandatory_field( EXPORTING i_param_name = 'BIN_ID' is_request = is_request ).

        " Set the method name..
        ls_request-method_name = zswl_cl_services_autostore=>gc_method_deletebin.
        " Set the transformation name..
        lv_trans_name = zswl_cl_services_autostore=>gc_method_deletebin_transf_na.
        " Process..
        me->process(
          EXPORTING
            is_request = ls_request
            iv_req_transf_name = lv_trans_name
          CHANGING
            cs_response = es_response ).

        ev_successful = abap_true.

        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_deletebin
                              INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_successful = abap_false.
        ev_errortext = lr_exc->m_msg_text.
    ENDTRY.

    IF iv_write_log = abap_true.
      " Write logging..
      go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
                         i_balid = zswl_cl_services_autostore=>gc_method_deletebin
                         i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
    ENDIF.

  ENDMETHOD.


METHOD flushportbin.

    " ------------------------------------------- "
    "  Local Declarations..
    " ------------------------------------------- "

    DATA: ls_request    LIKE is_request,
          lv_trans_name TYPE string,
          lr_exc        TYPE REF TO zcx_swl_as_if_exception.

    " ------------------------------------------- "
    "  Processing Logic..
    " ------------------------------------------- "

    TRY.
        " Initialize Logging object..
        IF cr_log IS NOT BOUND.
          CREATE OBJECT go_log.
        ELSE.
          go_log = cr_log.
        ENDIF.

        " Start logging..
        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_flushportbin
                              INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

        ls_request = is_request.

        " Check whether 'PORT_ID' is not initial..
        me->check_mandatory_field( EXPORTING i_param_name = 'PORT_ID' is_request = is_request ).

        " Check whether 'BIN_ID' is not initial..
        me->check_mandatory_field( EXPORTING i_param_name = 'BIN_ID' is_request = is_request ).

        " Set the method name..
        ls_request-method_name = zswl_cl_services_autostore=>gc_method_flushportbin.
        " Set the transformation name..
        lv_trans_name = zswl_cl_services_autostore=>gc_method_flushportbin_transf.
        " Process..
        me->process(
          EXPORTING
            is_request = ls_request
            iv_req_transf_name = lv_trans_name
          CHANGING
            cs_response = es_response ).

        ev_successful = abap_true.

        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_flushportbin
                              INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_successful = abap_false.
        ev_errortext = lr_exc->m_msg_text.
    ENDTRY.

    IF iv_write_log = abap_true.
      " Write logging..
      go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
                         i_balid = zswl_cl_services_autostore=>gc_method_flushportbin
                         i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
    ENDIF.

  ENDMETHOD.


METHOD forcecharge.
*
*    " ------------------------------------------- "
*    "  Local Declarations..
*    " ------------------------------------------- "
*
*    DATA: ls_request    LIKE is_request,
*          lv_trans_name TYPE string,
*          lr_exc        TYPE REF TO zcx_swl_as_if_exception.
*
*    " ------------------------------------------- "
*    "  Processing Logic..
*    " ------------------------------------------- "
*
*    TRY.
*        " Initialize Logging object..
*        IF cr_log IS NOT BOUND.
*          CREATE OBJECT go_log.
*        ELSE.
*          go_log = cr_log.
*        ENDIF.
*
*        " Start logging..
*        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_forcecharge
*                              INTO zswl_cl_log=>m_dummy_msg.
*        go_log->add( i_syst = abap_true ).
*
*        ls_request = is_request.
*
*        IF ls_request-charge_percent IS INITIAL.
*          ls_request-charge_percent = 0.
*        ENDIF.
*
*        " Set the method name..
*        ls_request-method_name = zswl_cl_services_autostore=>gc_method_forcecharge.
*        " Set the transformation name..
*        lv_trans_name = zswl_cl_services_autostore=>gc_method_forcecharge_transf.
*        " Process..
*        me->process(
*          EXPORTING
*            is_request = ls_request
*            iv_req_transf_name = lv_trans_name
*          CHANGING
*            cs_response = es_response ).
*
*        ev_successful = abap_true.
*
*        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_forcecharge
*                              INTO zswl_cl_log=>m_dummy_msg.
*        go_log->add( i_syst = abap_true ).
*
*      CATCH zcx_swl_as_if_exception INTO lr_exc.
*        ev_successful = abap_false.
*        ev_errortext = lr_exc->m_msg_text.
*    ENDTRY.
*
*    IF iv_write_log = abap_true.
*      " Write logging..
*      go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
*                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
*                         i_balid = zswl_cl_services_autostore=>gc_method_forcecharge
*                         i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
*    ENDIF.

  ENDMETHOD.


METHOD forecastbin.

    " ------------------------------------------- "
    "  Local Declarations..
    " ------------------------------------------- "

    DATA: ls_request    LIKE is_request,
          lv_trans_name TYPE string,
          lr_exc        TYPE REF TO zcx_swl_as_if_exception.

    " ------------------------------------------- "
    "  Processing Logic..
    " ------------------------------------------- "

    TRY.
        " Initialize Logging object..
        IF cr_log IS NOT BOUND.
          CREATE OBJECT go_log.
        ELSE.
          go_log = cr_log.
        ENDIF.

        " Start logging..
        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_forecastbin
                              INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

        ls_request = is_request.

        " Set the method name..
        ls_request-method_name = zswl_cl_services_autostore=>gc_method_forecastbin.
        " Set the transformation name..
        lv_trans_name = zswl_cl_services_autostore=>gc_method_forecastbin_transf.
        " Process..
        me->process(
          EXPORTING
            is_request = ls_request
            iv_req_transf_name = lv_trans_name
          CHANGING
            cs_response = es_response ).

        ev_successful = abap_true.

        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_forecastbin
                              INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_successful = abap_false.
        ev_errortext = lr_exc->m_msg_text.
    ENDTRY.

    IF iv_write_log = abap_true.
      " Write logging..
      go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
                         i_balid = zswl_cl_services_autostore=>gc_method_forecastbin
                         i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
    ENDIF.

  ENDMETHOD.


METHOD GETBININFO.
    DATA: ls_request    like is_request,
          lv_trans_name TYPE string,
          lr_exc        TYPE REF TO zcx_swl_as_if_exception.

    TRY.
        IF cr_log IS NOT BOUND.
          CREATE OBJECT go_log.
        ELSE.
          go_log = cr_log.
        ENDIF.

        "Log
        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_get_bin_info
                INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

        ls_request = is_request.
        "check if port_id is not null
*        me->check_mandatory_field( EXPORTING i_param_name = 'PORT_ID' is_request = is_request ).

        "set the method name
        ls_request-method_name = zswl_cl_services_autostore=>gc_method_get_bin_info.
        "set the transformation name
        lv_trans_name = zswl_cl_services_autostore=>gc_method_get_bin_inf_trnsf_na.
        "process
        me->process(
          EXPORTING
            is_request = ls_request
            iv_req_transf_name = lv_trans_name
          CHANGING
            cs_response = et_response ).

        ev_successful = abap_true.

        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_get_bin_info
        INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_successful = abap_false.
        ev_errortext = lr_exc->m_msg_text.
    ENDTRY.

    IF iv_write_log = abap_true.
      go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
                         i_balid = zswl_cl_services_autostore=>gc_method_get_bin_info
                         i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
    ENDIF.
  ENDMETHOD.


METHOD GETBINLOCATION.
    DATA: ls_request    like is_request,
          lv_trans_name TYPE string,
          lr_exc        TYPE REF TO zcx_swl_as_if_exception.

    TRY.
        IF cr_log IS NOT BOUND.
          CREATE OBJECT go_log.
        ELSE.
          go_log = cr_log.
        ENDIF.

        "Log
        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_get_bin_location
                INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

        ls_request = is_request.
        "check if port_id is not null
*        me->check_mandatory_field( EXPORTING i_param_name = 'PORT_ID' is_request = is_request ).

        "set the method name
        ls_request-method_name = zswl_cl_services_autostore=>gc_method_get_bin_location.
        "set the transformation name
        lv_trans_name = zswl_cl_services_autostore=>gc_method_get_bin_inf_trnsf_na.
        "process
        me->process(
          EXPORTING
            is_request = ls_request
            iv_req_transf_name = lv_trans_name
          CHANGING
            cs_response = et_response ).

        ev_successful = abap_true.

        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_get_bin_location
        INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_successful = abap_false.
        ev_errortext = lr_exc->m_msg_text.
    ENDTRY.

    IF iv_write_log = abap_true.
      go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
                         i_balid = zswl_cl_services_autostore=>gc_method_get_bin_location
                         i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
    ENDIF.
  ENDMETHOD.


METHOD getportstatus.

    " ------------------------------------------ "
    "  Local Declarations..
    " ------------------------------------------ "

    DATA: ls_request    LIKE is_request,
          lv_trans_name TYPE string,
          lr_exc        TYPE REF TO zcx_swl_as_if_exception.

    " ------------------------------------------ "
    "  Processing Logic..
    " ------------------------------------------ "

    TRY.
        IF cr_log IS NOT BOUND.
          CREATE OBJECT go_log.
        ELSE.
          go_log = cr_log.
        ENDIF.

        "Log
        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_getportstatus
                INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

        ls_request = is_request.
        "check if port_id is not null
        me->check_mandatory_field( EXPORTING i_param_name = 'PORT_ID' is_request = is_request ).

        "set the method name
        ls_request-method_name = zswl_cl_services_autostore=>gc_method_getportstatus.
        "set the transformation name
        lv_trans_name = zswl_cl_services_autostore=>gc_method_getportstatus_transf.
        "process
        me->process(
          EXPORTING
            is_request = ls_request
            iv_req_transf_name = lv_trans_name
            iv_no_response = abap_false "true
           " iv_resp_transf_name = ''
          CHANGING
            cs_response = es_response ).

        ev_successful = abap_true.

        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_getportstatus
        INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_successful = abap_false.
        ev_errortext = lr_exc->m_msg_text.
    ENDTRY.

    IF iv_write_log = abap_true.
      go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
                     i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
                     i_balid = zswl_cl_services_autostore=>gc_method_getportstatus
                     i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
    ENDIF.


  ENDMETHOD.


METHOD getsystemstate.

    " ------------------------------------------- "
    "  Local Declarations..
    " ------------------------------------------- "

    DATA: ls_request    TYPE zswl_s_as_if_request,
          lv_trans_name TYPE string,
          lr_exc        TYPE REF TO zcx_swl_as_if_exception.

    " ------------------------------------------- "
    "  Processing Logic..
    " ------------------------------------------- "

    TRY.
        " Initialize Logging object..
        IF cr_log IS NOT BOUND.
          CREATE OBJECT go_log.
        ELSE.
          go_log = cr_log.
        ENDIF.

        " Start logging..
        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_getsyststate_transf
                              INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

        " Set the method name..
        ls_request-method_name = zswl_cl_services_autostore=>gc_method_getsystemstate.
        " Set the transformation name..
        lv_trans_name = zswl_cl_services_autostore=>gc_method_getsyststate_transf.
        " Process..
        me->process(
          EXPORTING
            is_request = ls_request
            iv_req_transf_name = lv_trans_name
          CHANGING
            cs_response = es_response ).

        ev_successful = abap_true.

        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_getsystemstate
                              INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_successful = abap_false.
        ev_errortext = lr_exc->m_msg_text.
    ENDTRY.

    IF iv_write_log = abap_true.
      " Write logging..
      go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
                         i_balid = zswl_cl_services_autostore=>gc_method_getsystemstate
                         i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
    ENDIF.

  ENDMETHOD.


METHOD GETTASKINFORMATION.
    DATA: ls_request    like is_request,
          lv_trans_name TYPE string,
          lr_exc        TYPE REF TO zcx_swl_as_if_exception.

    TRY.
        IF cr_log IS NOT BOUND.
          CREATE OBJECT go_log.
        ELSE.
          go_log = cr_log.
        ENDIF.

        "Log
        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_get_task_info
                INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

        ls_request = is_request.
        "check if port_id is not null
*        me->check_mandatory_field( EXPORTING i_param_name = 'PORT_ID' is_request = is_request ).

        "set the method name
        ls_request-method_name = zswl_cl_services_autostore=>gc_method_get_task_info.
        "set the transformation name
        lv_trans_name = zswl_cl_services_autostore=>gc_method_get_bin_inf_trnsf_na.
        "process
        me->process(
          EXPORTING
            is_request = ls_request
            iv_req_transf_name = lv_trans_name
          CHANGING
            cs_response = et_response ).

        ev_successful = abap_true.

        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_get_task_info
        INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_successful = abap_false.
        ev_errortext = lr_exc->m_msg_text.
    ENDTRY.

    IF iv_write_log = abap_true.
      go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
                         i_balid = zswl_cl_services_autostore=>gc_method_get_task_info
                         i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
    ENDIF.
  ENDMETHOD.


METHOD insertbin.
    DATA: ls_request    LIKE is_request,
          lv_trans_name TYPE string,
          lr_exc        TYPE REF TO zcx_swl_as_if_exception.

    TRY.
        IF cr_log IS NOT BOUND.
          CREATE OBJECT go_log.
        ELSE.
          go_log = cr_log.
        ENDIF.

        "Log
        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_insertbin
                INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

        ls_request = is_request.
        "check if bin_id is not null
        me->check_mandatory_field( EXPORTING i_param_name = 'PORT_ID' is_request = is_request ).
        "check if content is not null
        me->check_mandatory_field( EXPORTING i_param_name = 'BIN_ID' is_request = is_request ).

        "set the method name
        ls_request-method_name = zswl_cl_services_autostore=>gc_method_insertbin.
        "set the transformation name
        lv_trans_name = zswl_cl_services_autostore=>gc_method_insertbin_transf_na.
        "process
        me->process(
          EXPORTING
            is_request = ls_request
            iv_req_transf_name = lv_trans_name
            iv_no_response = abap_true
          CHANGING
            cs_response = es_response ).

        ev_successful = abap_true.

        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_insertbin
        INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_successful = abap_false.
        ev_errortext = lr_exc->m_msg_text.
    ENDTRY.

    IF iv_write_log = abap_true.
      go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
                         i_balid = zswl_cl_services_autostore=>gc_method_insertbin i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
    ENDIF.
  ENDMETHOD.


METHOD openbin.
    DATA: ls_request    like is_request,
          lv_trans_name TYPE string,
          lr_exc        TYPE REF TO zcx_swl_as_if_exception.

    TRY.
        IF cr_log IS NOT BOUND.
          CREATE OBJECT go_log.
        ELSE.
          go_log = cr_log.
        ENDIF.

        "Log
        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_openbin
                INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

        ls_request = is_request.
        "check if port_id is not null
        me->check_mandatory_field( EXPORTING i_param_name = 'PORT_ID' is_request = is_request ).

        "set the method name
        ls_request-method_name = zswl_cl_services_autostore=>gc_method_openbin.
        "set the transformation name
        lv_trans_name = zswl_cl_services_autostore=>gc_method_openbin_transf_name.
        "process
        me->process(
          EXPORTING
            is_request = ls_request
            iv_req_transf_name = lv_trans_name
          CHANGING
            cs_response = es_response ).

        ev_successful = abap_true.

        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_openbin
        INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_successful = abap_false.
        ev_errortext = lr_exc->m_msg_text.
    ENDTRY.

    IF iv_write_log = abap_true.
      go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
                         i_balid = zswl_cl_services_autostore=>gc_method_openbin
                         i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
    ENDIF.
  ENDMETHOD.


METHOD openport.
    DATA: ls_request    like is_request,
          lv_trans_name TYPE string,
          lr_exc        TYPE REF TO zcx_swl_as_if_exception.

    TRY.
        IF cr_log IS NOT BOUND.
          CREATE OBJECT go_log.
        ELSE.
          go_log = cr_log.
        ENDIF.

        "Log
        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_openport
                INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

        ls_request = is_request.
        "check if port_id is not null
        me->check_mandatory_field( EXPORTING i_param_name = 'PORT_ID' is_request = is_request ).

        "set the method name
        ls_request-method_name = zswl_cl_services_autostore=>gc_method_openport.
        "set the transformation name
        lv_trans_name = zswl_cl_services_autostore=>gc_method_openport_transf_name.
        "process
        me->process(
          EXPORTING
            is_request = ls_request
            iv_req_transf_name = lv_trans_name
            iv_no_response = abap_true
          CHANGING
            cs_response = es_response ).

        ev_successful = abap_true.

        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_openport
        INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_successful = abap_false.
        ev_errortext = lr_exc->m_msg_text.
    ENDTRY.

    IF iv_write_log = abap_true.
      go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
                         i_balid = 'openport' i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
    ENDIF.
  ENDMETHOD.


METHOD portbinmode.
    DATA: ls_request    like is_request,
          lv_trans_name TYPE string,
          lr_exc        TYPE REF TO zcx_swl_as_if_exception.

    TRY.
        IF cr_log IS NOT BOUND.
          CREATE OBJECT go_log.
        ELSE.
          go_log = cr_log.
        ENDIF.

        "Log
        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_port_bin_mode
                INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

        ls_request = is_request.
        "check if port_id is not null
        me->check_mandatory_field( EXPORTING i_param_name = 'PORT_ID' is_request = is_request ).
        "check if bin_id is set
        me->check_mandatory_field( EXPORTING i_param_name = 'BIN_ID' is_request = is_request ).
        "check if bin_mode is set
        me->check_mandatory_field( EXPORTING i_param_name = 'BIN_MODE' is_request = is_request ).

        "set the method name
        ls_request-method_name = zswl_cl_services_autostore=>gc_method_port_bin_mode.
        "set the transformation name
        lv_trans_name = zswl_cl_services_autostore=>gc_method_pt_bin_mode_trnsf_na.
        "process
        me->process(
          EXPORTING
            is_request = ls_request
            iv_req_transf_name = lv_trans_name
            iv_no_response = abap_true
          CHANGING
            cs_response = es_response ).

        ev_successful = abap_true.

        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_port_bin_mode
        INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_successful = abap_false.
        ev_errortext = lr_exc->m_msg_text.
    ENDTRY.

    IF iv_write_log = abap_true.
      go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
                         i_balid = zswl_cl_services_autostore=>gc_method_port_bin_mode
                         i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
    ENDIF.
  ENDMETHOD.


METHOD portbinready.
    DATA: ls_request    like is_request,
          lv_trans_name TYPE string,
          lr_exc        TYPE REF TO zcx_swl_as_if_exception.

    TRY.
        IF cr_log IS NOT BOUND.
          CREATE OBJECT go_log.
        ELSE.
          go_log = cr_log.
        ENDIF.

        "Log
        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_port_bin_ready
                INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

        ls_request = is_request.
        "check if port_id is not null
        me->check_mandatory_field( EXPORTING i_param_name = 'PORT_ID' is_request = is_request ).
        "check if x pos is set
        me->check_mandatory_field( EXPORTING i_param_name = 'X' is_request = is_request ).
        "check if y pos is set
        me->check_mandatory_field( EXPORTING i_param_name = 'Y' is_request = is_request ).
        "check if bin_id is set
        me->check_mandatory_field( EXPORTING i_param_name = 'BIN_ID' is_request = is_request ).

        "set the method name
        ls_request-method_name = zswl_cl_services_autostore=>gc_method_port_bin_ready.
        "set the transformation name
        lv_trans_name = zswl_cl_services_autostore=>gc_method_pt_bin_rdy_trnsf_na.
        "process
        me->process(
          EXPORTING
            is_request = ls_request
            iv_req_transf_name = lv_trans_name
            iv_no_response = abap_true
          CHANGING
            cs_response = es_response ).

        ev_successful = abap_true.

        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_port_bin_ready
        INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_successful = abap_false.
        ev_errortext = lr_exc->m_msg_text.
    ENDTRY.

    IF iv_write_log = abap_true.
      go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
                         i_balid = zswl_cl_services_autostore=>gc_method_port_bin_ready
                         i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
    ENDIF.
  ENDMETHOD.


METHOD portcellallocate.
    DATA: ls_request    like is_request,
          lv_trans_name TYPE string,
          lr_exc        TYPE REF TO zcx_swl_as_if_exception.

    TRY.
        IF cr_log IS NOT BOUND.
          CREATE OBJECT go_log.
        ELSE.
          go_log = cr_log.
        ENDIF.

        "Log
        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_port_cell_alloc
                INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

        ls_request = is_request.
        "check if port_id is not null
        me->check_mandatory_field( EXPORTING i_param_name = 'PORT_ID' is_request = is_request ).
        "check if x pos is set
        me->check_mandatory_field( EXPORTING i_param_name = 'X' is_request = is_request ).
        "check if y pos is set
        me->check_mandatory_field( EXPORTING i_param_name = 'Y' is_request = is_request ).

        "set the method name
        ls_request-method_name = zswl_cl_services_autostore=>gc_method_port_cell_alloc.
        "set the transformation name
        lv_trans_name = zswl_cl_services_autostore=>gc_method_pt_cl_aloc_trnsf_na.
        "process
        me->process(
          EXPORTING
            is_request = ls_request
            iv_req_transf_name = lv_trans_name
            iv_no_response = abap_true
          CHANGING
            cs_response = es_response ).

        ev_successful = abap_true.

        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_port_cell_alloc
        INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_successful = abap_false.
        ev_errortext = lr_exc->m_msg_text.
    ENDTRY.

    IF iv_write_log = abap_true.
      go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
                         i_balid = zswl_cl_services_autostore=>gc_method_port_cell_alloc
                         i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
    ENDIF.
  ENDMETHOD.


METHOD portlocationready.
    DATA: ls_request    like is_request,
          lv_trans_name TYPE string,
          lr_exc        TYPE REF TO zcx_swl_as_if_exception.

    TRY.
        IF cr_log IS NOT BOUND.
          CREATE OBJECT go_log.
        ELSE.
          go_log = cr_log.
        ENDIF.

        "Log
        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_port_loc_ready
                INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

        ls_request = is_request.
        "check if port_id is not null
        me->check_mandatory_field( EXPORTING i_param_name = 'PORT_ID' is_request = is_request ).
        "check if x pos is set
        me->check_mandatory_field( EXPORTING i_param_name = 'X' is_request = is_request ).
        "check if y pos is set
        me->check_mandatory_field( EXPORTING i_param_name = 'Y' is_request = is_request ).

        "set the method name
        ls_request-method_name = zswl_cl_services_autostore=>gc_method_port_loc_ready.
        "set the transformation name
        lv_trans_name = zswl_cl_services_autostore=>gc_method_pt_loc_rdy_trnsf_na.
        "process
        me->process(
          EXPORTING
            is_request = ls_request
            iv_req_transf_name = lv_trans_name
            iv_no_response = abap_true
          CHANGING
            cs_response = es_response ).

        ev_successful = abap_true.

        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_port_loc_ready
        INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_successful = abap_false.
        ev_errortext = lr_exc->m_msg_text.
    ENDTRY.

    IF iv_write_log = abap_true.
      go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
                         i_balid = zswl_cl_services_autostore=>gc_method_port_loc_ready
                         i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
    ENDIF.
  ENDMETHOD.


METHOD removebin.
    DATA: ls_request    like is_request,
          lv_trans_name TYPE string,
          lr_exc        TYPE REF TO zcx_swl_as_if_exception.

    TRY.
        IF cr_log IS NOT BOUND.
          CREATE OBJECT go_log.
        ELSE.
          go_log = cr_log.
        ENDIF.

        "Log
        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_removebin
                INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

        ls_request = is_request.
        "check if port_id is not null
        me->check_mandatory_field( EXPORTING i_param_name = 'PORT_ID' is_request = is_request ).
        "check if bin_id is not null
        me->check_mandatory_field( EXPORTING i_param_name = 'BIN_ID' is_request = is_request ).

        "set the method name
        ls_request-method_name = zswl_cl_services_autostore=>gc_method_removebin.
        "set the transformation name
        lv_trans_name = zswl_cl_services_autostore=>gc_method_removebin_transf_na.
        "process
        me->process(
          EXPORTING
            is_request = ls_request
            iv_req_transf_name = lv_trans_name
            iv_no_response = abap_true
          CHANGING
            cs_response = es_response ).

        ev_successful = abap_true.

        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_removebin
        INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_successful = abap_false.
        ev_errortext = lr_exc->m_msg_text.
    ENDTRY.

    IF iv_write_log = abap_true.
      go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
                         i_balid = zswl_cl_services_autostore=>gc_method_removebin i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
    ENDIF.
  ENDMETHOD.


METHOD test_method.
    DATA: lr_as_if TYPE REF TO zswl_cl_services_autostore,
          lr_exc   TYPE REF TO zcx_swl_as_if_exception.

    TRY.
**********************************************************************
* Very dirty test method.
**********************************************************************

        IF i_method_name+0(4) = 'PORT'.
          IF is_request_port_tele IS NOT SUPPLIED
             OR is_request_port_tele IS INITIAL.
            ev_result = 'Parameter IS_REQUEST_PORT_TELE is not filled!!!!'.
            RETURN.
          ENDIF.
          CREATE OBJECT lr_as_if.
          CALL METHOD lr_as_if->(i_method_name)
            EXPORTING
              is_request = is_request_port_tele.
        ELSE.
          IF is_request IS NOT SUPPLIED
            OR is_request IS INITIAL.
            ev_result = 'Parameter IS_REQUEST is not filled!!!!'.
            RETURN.
          ENDIF.
          CREATE OBJECT lr_as_if.
          CALL METHOD lr_as_if->(i_method_name)
            EXPORTING
              is_request = is_request.


        ENDIF.
      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_result = lr_exc->m_msg_text.
    ENDTRY.
  ENDMETHOD.


METHOD updatebin.
    DATA: ls_request    like is_request,
          lv_trans_name TYPE string,
          lr_exc        TYPE REF TO zcx_swl_as_if_exception.

    TRY.
        IF cr_log IS NOT BOUND.
          CREATE OBJECT go_log.
        ELSE.
          go_log = cr_log.
        ENDIF.

        "Log
        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_updatebin
                INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

        ls_request = is_request.
        "check if bin_id is not null
        me->check_mandatory_field( EXPORTING i_param_name = 'BIN_ID' is_request = is_request ).
        "check if content is not null
        me->check_mandatory_field( EXPORTING i_param_name = 'CONTENT' is_request = is_request ).

        "set the method name
        ls_request-method_name = zswl_cl_services_autostore=>gc_method_updatebin.
        "set the transformation name
        lv_trans_name = zswl_cl_services_autostore=>gc_method_updatebin_transf_na.
        "process
        me->process(
          EXPORTING
            is_request = ls_request
            iv_req_transf_name = lv_trans_name
            iv_no_response = abap_true
          CHANGING
            cs_response = es_response ).

        ev_successful = abap_true.

        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_updatebin
        INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_successful = abap_false.
        ev_errortext = lr_exc->m_msg_text.
    ENDTRY.

    IF iv_write_log = abap_true.
      go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
                         i_balid = zswl_cl_services_autostore=>gc_method_updatebin i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
    ENDIF.
  ENDMETHOD.


METHOD update_as_bin_content_from_hus.
*    DATA:
*      ls_request        TYPE zswl_s_as_if_request,
*      lr_hu             TYPE REF TO zswl_cl_hu,
*      lv_successful     TYPE boolean,
*      lv_error          TYPE string,
*      lv_type           TYPE n LENGTH 2,
*      lv_cont           TYPE n LENGTH 2,
*      lv_actual_huident TYPE /scwm/de_huident,
*      lv_huident_to     TYPE /scwm/de_huident,
*      lv_counter        TYPE n LENGTH 5,
*      lv_new_hu_cc      TYPE zswl_de_as_cont_code
*      .
*
*    IF go_service_as IS NOT BOUND.
*      CREATE OBJECT go_service_as.
*    ENDIF.
*
*    IF cr_log IS NOT BOUND.
*      CREATE OBJECT cr_log.
*    ENDIF.
*
*    IF it_huidents IS SUPPLIED AND lines( it_huidents ) > 0.
*      LOOP AT it_huidents INTO DATA(lr_huidents).
*        lv_actual_huident = lr_huidents-low.
*        zswl_cl_hu=>delete_leading_zeros_huident( CHANGING c_hu = lv_actual_huident ).
*        CREATE OBJECT lr_hu
*          EXPORTING
*            i_lgnum        = iv_lgnum
*            i_huident      = lv_actual_huident
*            i_read_hu_tree = abap_true.
*
*        IF lr_hu IS BOUND.
**   Get the hu layout informations from the customizing
*          DATA(ls_hulayout) = zswl_cl_as_hu=>get_hu_layout( EXPORTING iv_hutype = lr_hu->get_hutyp( ) ).
*          DATA(ls_huhdr) = lr_hu->get_huhdr_hu( ).
*          zswl_cl_hu=>delete_leading_zeros_huident( CHANGING c_hu = ls_huhdr-huident ).
*          lv_type = ls_hulayout-x_rows * ls_hulayout-y_cols.
*
*          "First read all sub hus and check the stock
*          DATA(lt_sub_hus_ref) = zswl_cl_as_hu=>get_all_sub_hus( lr_hu ).
*          LOOP AT lt_sub_hus_ref INTO DATA(ls_sub_hu_ref).
*            IF ls_sub_hu_ref-o_hu->has_stock( ) = abap_true.
*              ADD 1 TO lv_cont.
*            ENDIF.
*          ENDLOOP.
*
**   Update Content code on the HU Header
*          lv_new_hu_cc = lv_type && lv_cont.
*
*          IF lv_new_hu_cc <> ls_huhdr-zzswl_as_cont_code.
*            "ContentCode for HU [&1] changed from [&2] to [&3]
*            MESSAGE w143(zswl_as) INTO zswl_cl_log=>m_dummy_msg WITH ls_huhdr-huident ls_huhdr-zzswl_as_cont_code lv_new_hu_cc.
*            cr_log->add( i_syst = abap_true ).
*            ls_huhdr-zzswl_as_cont_code = lv_new_hu_cc.
*            lr_hu->update_huhdr( ls_huhdr ).
**     Refresh the HU from DB
*            lr_hu->refresh( abap_true ).
*          ELSE.
*            "ContentCode for HU [&1] not changed
*            MESSAGE i144(zswl_as) INTO zswl_cl_log=>m_dummy_msg WITH ls_huhdr-huident.
*            cr_log->add( i_syst = abap_true ).
*          ENDIF.
*
*        ENDIF.
*        CLEAR ls_request.
*        ls_request-bin_id = ls_huhdr-huident.
*        ls_request-content = ls_huhdr-zzswl_as_cont_code.
*
*        go_service_as->updatebin(
*          EXPORTING
*            is_request    = ls_request
*            iv_write_log  = iv_write_log
*          IMPORTING
*            ev_successful = lv_successful
*            ev_errortext  = lv_error
*          CHANGING
*            cr_log        = cr_log
*            ).
*        IF lv_successful = abap_false.
*          "
*          ev_successful = lv_successful.
*          ev_errortext  = lv_error.
*          RETURN.
*        ELSE.
*          APPEND ls_huhdr TO et_updated_hus.
*        ENDIF.
*      ENDLOOP.
*    ELSEIF iv_huident_from IS SUPPLIED AND iv_huident_to IS SUPPLIED.
*      "First insert the starting HU-Ident
*      lv_actual_huident = iv_huident_from.
*      lv_huident_to = iv_huident_to.
*      zswl_cl_hu=>delete_leading_zeros_huident( CHANGING c_hu = lv_actual_huident ).
*      zswl_cl_hu=>delete_leading_zeros_huident( CHANGING c_hu = lv_huident_to ).
*      DO.
*        CREATE OBJECT lr_hu
*          EXPORTING
*            i_lgnum        = iv_lgnum
*            i_huident      = lv_actual_huident
*            i_read_hu_tree = abap_true.
*
*        IF lr_hu IS BOUND.
**   Get the hu layout informations from the customizing
*          ls_hulayout = zswl_cl_as_hu=>get_hu_layout( EXPORTING iv_hutype = lr_hu->get_hutyp( ) ).
*          ls_huhdr = lr_hu->get_huhdr_hu( ).
*          zswl_cl_hu=>delete_leading_zeros_huident( CHANGING c_hu = ls_huhdr-huident ).
*          lv_type = ls_hulayout-x_rows * ls_hulayout-y_cols.
*
*          "First read all sub hus and check the stock
*          lt_sub_hus_ref = zswl_cl_as_hu=>get_all_sub_hus( lr_hu ).
*          LOOP AT lt_sub_hus_ref INTO ls_sub_hu_ref.
*            IF ls_sub_hu_ref-o_hu->has_stock( ) = abap_true.
*              ADD 1 TO lv_cont.
*            ENDIF.
*          ENDLOOP.
*
**   Update Content code on the HU Header
*          lv_new_hu_cc = lv_type && lv_cont.
*
*          IF lv_new_hu_cc <> ls_huhdr-zzswl_as_cont_code.
*            "ContentCode for HU [&1] changed from [&2] to [&3]
*            MESSAGE w143(zswl_as) INTO zswl_cl_log=>m_dummy_msg WITH ls_huhdr-huident ls_huhdr-zzswl_as_cont_code lv_new_hu_cc.
*            cr_log->add( i_syst = abap_true ).
*            ls_huhdr-zzswl_as_cont_code = lv_new_hu_cc.
*            lr_hu->update_huhdr( ls_huhdr ).
**     Refresh the HU from DB
*            lr_hu->refresh( abap_true ).
*          ELSE.
*            "ContentCode for HU [&1] not changed
*            MESSAGE i144(zswl_as) INTO zswl_cl_log=>m_dummy_msg WITH ls_huhdr-huident.
*            cr_log->add( i_syst = abap_true ).
*          ENDIF.
*
*        ENDIF.
*        CLEAR ls_request.
*        ls_request-bin_id = ls_huhdr-huident.
*        ls_request-content = ls_huhdr-zzswl_as_cont_code.
*
*        go_service_as->updatebin(
*          EXPORTING
*            is_request    = ls_request
*            iv_write_log  = iv_write_log
*          IMPORTING
*            ev_successful = lv_successful
*            ev_errortext  = lv_error
*          CHANGING
*            cr_log        = cr_log
*            ).
*        IF lv_successful = abap_false.
*          "
*          ev_successful = lv_successful.
*          ev_errortext  = lv_error.
*          RETURN.
*        ELSE.
*          APPEND ls_huhdr TO et_updated_hus.
*        ENDIF.
*
** Go out if we reached the last number
*        IF lv_actual_huident = lv_huident_to.
*          EXIT.
*        ENDIF.
*
*        lv_counter = lv_actual_huident+0(5).
*        lv_counter = lv_counter + 1.
*
*        lv_actual_huident = lv_counter.
*
*      ENDDO.
*    ENDIF.
*    IF iv_write_log = abap_true.
*      cr_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
*                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
*                         i_balid = 'UPDATE_HU_CONTENT'
*                         i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
*    ENDIF.

  ENDMETHOD.


METHOD update_hu_content_from_as.
*    DATA: lt_response   TYPE zswl_tt_response_bin_info,
*          ls_response   LIKE LINE OF lt_response,
*          lr_hu         TYPE REF TO zswl_cl_hu,
*          lv_successful TYPE boolean,
*          lv_error      TYPE string,
*          lv_huident    TYPE /scwm/de_huident,
*          lv_exist      TYPE boolean,
*          ls_huhdr      TYPE /scwm/s_huhdr_int.
*
*    IF go_service_as IS NOT BOUND.
*      CREATE OBJECT go_service_as.
*    ENDIF.
*
*    IF cr_log IS NOT BOUND.
*      CREATE OBJECT cr_log.
*    ENDIF.
*
*
*    go_service_as->getbininfo(
*      EXPORTING
*        is_request    = is_request
*        iv_write_log  = iv_write_log
*      IMPORTING
*        et_response   = lt_response
*        ev_successful = lv_successful
*        ev_errortext  = lv_error
*      CHANGING
*        cr_log        = cr_log
*        ).
*
*    IF lv_successful = abap_false.
*      "
*      ev_successful = lv_successful.
*      ev_errortext  = lv_error.
*      RETURN.
*    ELSE.
*
*      IF lines( lt_response ) > 0.
*
*        LOOP AT lt_response INTO ls_response.
*              lv_huident = ls_response-bin_id.
*              zswl_cl_hu=>append_leading_zeros_huident( CHANGING c_hu = lv_huident ).
*              CALL METHOD zswl_cl_hu=>is_hu_existing
*                EXPORTING
*                  i_lgnum    = iv_lgnum
*                  i_huident  = lv_huident
*                IMPORTING
*                  e_existing = lv_exist.
*
*              IF lv_exist = abap_true.
*                CREATE OBJECT lr_hu
*                  EXPORTING
*                    i_lgnum   = iv_lgnum
*                    i_huident = lv_huident.
*
*                IF lr_hu IS BOUND.
*                  ls_huhdr = lr_hu->get_huhdr_hu( ).
*                  "Set the content code from AutoStore to HU-ZZCONTENT_CODE
*                  ls_huhdr-zzswl_as_cont_code = ls_response-content.
*                  lr_hu->update_huhdr( ls_huhdr ).
*
*                  MESSAGE s018(zswl_as) WITH ls_response-bin_id ls_response-content
*                    INTO zswl_cl_log=>m_dummy_msg.
*                  cr_log->add( i_syst = abap_true ).
*
*                  APPEND ls_huhdr TO et_updated_hus.
*                ENDIF.
*              ENDIF.
*        ENDLOOP.
*
*      ENDIF.
*
*    ENDIF.
*
*    IF iv_write_log = abap_true.
*      cr_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
*                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
*                         i_balid = 'UPDATE_HU_CONTENT'
*                         i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
*    ENDIF.
*

  ENDMETHOD.


METHOD update_taskgroup.
    DATA: ls_request    like is_request,
          lv_trans_name TYPE string,
          lr_exc        TYPE REF TO zcx_swl_as_if_exception.

    TRY.
        IF cr_log IS NOT BOUND.
          CREATE OBJECT go_log.
        ELSE.
          go_log = cr_log.
        ENDIF.

        "Log
        MESSAGE s014(zswl_as) WITH zswl_cl_services_autostore=>gc_method_upd_taskgroup
                INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

        ls_request = is_request.
        "check if taskgroup_id is set
        me->check_mandatory_field( EXPORTING i_param_name = 'TASKGROUP_ID' is_request = is_request ).
        "check if category is set
*    me->check_mandatory_field( EXPORTING i_param_name = 'CATEGORY' is_request = is_request ).
*    "check if req_time is set
*    me->check_mandatory_field( EXPORTING i_param_name = 'REQ_TIME' is_request = is_request ).
*    "check if priority is set
*    me->check_mandatory_field( EXPORTING i_param_name = 'PRIORITY' is_request = is_request ).
*    "check if min. one task is inserted
*    me->check_mandatory_field( EXPORTING i_param_name = 'TASKS' is_request = is_request ).

        "set the method name
        ls_request-method_name = zswl_cl_services_autostore=>gc_method_upd_taskgroup.
        "set the transformation name
        lv_trans_name = zswl_cl_services_autostore=>gc_method_upd_tg_transf_name.
        "process
        me->process(
          EXPORTING
            is_request = ls_request
            iv_req_transf_name = lv_trans_name
            iv_no_response = abap_true
          CHANGING
            cs_response = es_response ).

        ev_successful = abap_true.

        MESSAGE s017(zswl_as) WITH zswl_cl_services_autostore=>gc_method_upd_taskgroup
        INTO zswl_cl_log=>m_dummy_msg.
        go_log->add( i_syst = abap_true ).

      CATCH zcx_swl_as_if_exception INTO lr_exc.
        ev_successful = abap_false.
        ev_errortext = lr_exc->m_msg_text.
    ENDTRY.

    IF iv_write_log = abap_true.
      go_log->write( i_balobj = zswl_cl_as_if_abstract=>gc_balobj_zswl
                         i_balsubobj = zswl_cl_as_if_abstract=>gc_balsubobj_as_if
                         i_balid = zswl_cl_services_autostore=>gc_method_upd_taskgroup i_write_mode = zswl_cl_log=>mc_wm_synchron  ).
    ENDIF.
  ENDMETHOD.
ENDCLASS.